# 多会话协同规划

为实现量子代码智能转换系统，建议并行维护下列六个对话线程（可由不同Agent或同一协调者轮流驱动），每个线程有明确输入输出与交互接口，确保全局状态保持一致：

1. **全局协调与流程治理对话**
   - 职责：维持总体进度表、同步约束、触发质量检查点、记录异常处理策略。
   - 关键交付：迭代计划、状态快照、升级/回退决策。
   - 与其他对话的接口：收集各线程的阶段性产物，发布下一阶段任务指令。

2. **RAG 知识库建设与维护对话**
   - 职责：依据仓库规范整理 ITensors、OptimKit 等库的 API JSON 条目，保持内容中立纯净。
   - 关键交付：结构化 API 文档、版本更新记录、宏观/微观查询索引。
   - 与其他对话的接口：为方案设计和编码线程提供受控检索渠道，但不输出策略性结论。

3. **Python 代码理解（Agent 1）对话**
   - 职责：运行三层分析（结构扫描、算法语义、参数约束），将理解结果封装为实现指南 JSON。
   - 关键交付：实现指南（含任务拆分、物理约束、关键参数、潜在陷阱）。
   - 与其他对话的接口：向蓝图设计线程提供输入，并向协调对话回传理解闭环状态。

4. **实现蓝图设计（Agent 2）对话**
   - 职责：吸收实现指南与 RAG 查询结果，完成数据结构、模块划分、依赖关系、函数签名等蓝图。
   - 关键交付：实现蓝图 JSON/Markdown，含技术选型、数据流、策略假设和验证点。
   - 与其他对话的接口：向编码线程提供明确要求，并向协调对话报告设计权衡与风险。

5. **Julia 编码与局部验证（Agent 3）对话**
   - 职责：按照蓝图执行“查阅-编码-自测”循环，产出专业级 Julia 代码与单元/数值测试钩子。
   - 关键交付：高质量 Julia 模块、测试脚本、实现日志（说明如何满足零硬编码和物理等价约束）。
   - 与其他对话的接口：向测试验证线程移交代码包，与协调对话同步阻塞问题或额外需求。

6. **测试验证与物理等价评审（Agent 4）对话**
   - 职责：建立语法/类型→逻辑/数值→物理等价的三层测试，生成审查报告和回归基线。
   - 关键交付：测试结果摘要、物理等价性证明、问题回溯建议。
   - 与其他对话的接口：将缺陷与建议反馈给编码线程，向协调对话提交验收结论。

> 协调者应负责维护跨对话的共享知识图谱（包括任务状态与版本信息），并确保所有线程都遵循仓库既定的“零硬编码、理解驱动、物理优先、专业质量”原则。根据任务规模可合并或拆分线程，但必须保证上述职责完整覆盖。
